# ============================================
# LAK Keyboard Configuration - 40% with Encoders
# ============================================

# ============ BLUETOOTH SETTINGS ============
CONFIG_ZMK_BLE=y
CONFIG_BT_CTLR_TX_PWR_PLUS_8=y
CONFIG_BT_MAX_CONN=5
CONFIG_BT_MAX_PAIRED=5
CONFIG_ZMK_BLE_CLEAR_BONDS_ON_START=n
CONFIG_BT_GATT_ENFORCE_SUBSCRIPTION=n

# ============ ENCODER SETTINGS (CRITICAL) ============
# Cấu hình EC11 encoder với chân A chung
CONFIG_EC11=y
CONFIG_EC11_TRIGGER_GLOBAL_THREAD=y
CONFIG_ZMK_ENCODER=y

# Debounce cho encoder - QUAN TRỌNG cho chân A chung
CONFIG_ZMK_ENCODER_DEBOUNCE_PRESS_MS=15
CONFIG_ZMK_ENCODER_DEBOUNCE_RELEASE_MS=15

# ============ KEYBOARD MATRIX SETTINGS ============
CONFIG_ZMK_KSCAN_DEBOUNCE_PRESS_MS=5
CONFIG_ZMK_KSCAN_DEBOUNCE_RELEASE_MS=5
CONFIG_ZMK_HID_REPORT_TYPE_NKRO=y

# ============ POWER MANAGEMENT ============
CONFIG_ZMK_SLEEP=y
# Thời gian idle trước khi sleep: 30 phút (1,800,000 ms)
CONFIG_ZMK_IDLE_SLEEP_TIMEOUT=1800000
# Không dùng deep sleep để encoder hoạt động ngay lập tức
CONFIG_ZMK_EXT_POWER=y
CONFIG_ZMK_USB=y

# ============ PERFORMANCE OPTIMIZATIONS ============
# Tăng buffer cho BLE stability
CONFIG_BT_BUF_ACL_RX_SIZE=512
CONFIG_BT_CTLR_DATA_LENGTH_MAX=251

# Tắt ZMK Studio để giảm RAM usage
CONFIG_ZMK_STUDIO=n

# Tắt RGB (vì không có)
CONFIG_ZMK_RGB_UNDERGLOW=n

# ============ LAYERS ============
CONFIG_ZMK_KEYMAP_LAYERS=4

# ============ DEBUG LOGGING ============
# Chỉ bật khi cần debug encoder
CONFIG_LOG=n
CONFIG_ZMK_USB_LOGGING=n
